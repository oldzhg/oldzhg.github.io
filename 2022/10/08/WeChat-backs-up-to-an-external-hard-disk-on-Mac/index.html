<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Old zhg">





<title>Mac 微信备份到外接硬盘方案 | 白驹过隙</title>



    <link rel="icon" href="https://pic.oldzhg.com/uPic/FIKIOQ.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="白驹过隙" type="application/atom+xml">
</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Drizzt&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/categories">分类</a>
                
                    <a class="menu-item" href="/tags">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Drizzt&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/categories">分类</a>
                
                    <a class="menu-item" href="/tags">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">展开目录</a>
        <a onclick="go_top()">回到顶部</a>
        <a onclick="go_bottom()">前往底部</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "折叠目录"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "展开目录"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Mac 微信备份到外接硬盘方案</h1>
            
                <div class="post-meta">
                    
                        作者: <a itemprop="author" rel="author" href="/">Old zhg</a>
                    

                    
                        <span class="post-time">
                        日期: <a href="#">October 8, 2022</a>
                        </span>
                    
                    <br/>
                        
                    
                        <span class="post-count">
                            字数统计:
                        <a href="">1.2k</a>  
                        </span>
                    
                    
                        <span class="post-count">
                            阅读时长:
                        <a href="">4 分钟</a>  
                        </span>
                    
                    <!--文章浏览量-->
                    <!-- 
                        <span id="busuanzi_container_page_pv">
                        阅读量
                        <a href="" id="busuanzi_value_page_pv"></a>
                    </span>
                     -->
                    <!-- 添加完成 -->
                    
                        <span class="post-category">
                    分类:
                            
                                <a href="/categories/%E5%B7%A5%E5%85%B7%E6%8A%80%E5%B7%A7/">工具技巧</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <hr>
<blockquote>
<p>mac版本微信中并没有指定备份路径的功能，备份的聊天记录文件也在一个很难找的位置。对于使用256g硬盘的mac的用户，微信聊天记录动辄十几G、几十G的大小，会造成非常严重的硬盘容量恐慌。所以把微信备份文件迁移到外置硬盘是一件非常有意义的工作。</p>
</blockquote>
<h2 id="微信的备份路径"><a href="#微信的备份路径" class="headerlink" title="微信的备份路径"></a>微信的备份路径</h2><p>微信的备份在</p>
<p><code>~/Library/Containers/com.tencent.xinWeChat/Data/Library/Application\ Support/com.tencent.xinWeChat/2.0b4.0.9</code> 这个目录下面的 <code>Backup</code> 文件夹里面。</p>
<p><img src="https://pic.oldzhg.com/uPic/image-1663224431683.webp" alt="image-1663224431683"></p>
<p>每一个微信账号的聊天记录备份对应这个目录下的一个文件夹（名称为一长串的字母及数字)</p>
<h2 id="比较简单的迁移方式"><a href="#比较简单的迁移方式" class="headerlink" title="比较简单的迁移方式"></a>比较简单的迁移方式</h2><p>知道了文件备份在那个目录，其实我们只需要每次备份完成之后，把这个里面的文件夹剪切粘贴到移动硬盘的指定位置即可。<br>需要恢复备份的时候再从移动硬盘里面把文件拷贝回这个目录即可。</p>
<h2 id="更智能的迁移方式"><a href="#更智能的迁移方式" class="headerlink" title="更智能的迁移方式"></a>更智能的迁移方式</h2><p>前一种方式操作起来稍微有点麻烦，需要自己来回复制，怎么才能省略掉这两个手动复制粘贴的操作呢，答案就是使用软连接的方式。</p>
<ul>
<li>如果你的mac版微信没有执行过备份操作，那可能没有这个Backup目录，或者Backup目录下面没有子目录，为了保证文件权限一致，需要先执行一次备份生成这个目录（无需全量备份，只备份一个人的聊天记录都行）</li>
<li>备份完成之后，将该 <code>Backup</code> 目录复制到移动硬盘下的某个目录，比如 <code>/Volumes/硬盘名/backup/wechat</code></li>
<li>复制完成之后就可以把微信默认备份路径下的 <code>Backup</code> 目录删除了，当然你不放心的话，也可以删除前先备份一下。</li>
<li>然后创建软连接，打开终端，执行如下命令。（注意。此处的 <code>硬盘名</code> 要改成你自己的外置硬盘的盘符名称）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /Volumes/硬盘名/backup/wechat/Backup ~/Library/Containers/com.tencent.xinWeChat/Data/Library/Application\ Support/com.tencent.xinWeChat/2.0b4.0.9/Backup</span><br></pre></td></tr></table></figure>

<ul>
<li><p>此时就能看到软连接已经创建好了，微信目录下的Backup已经指向到了移动硬盘下的Backup目录</p>
<p><img src="https://pic.oldzhg.com/uPic/image-1663225770604.webp" alt="image-1663225770604"></p>
</li>
<li><p>第一步的时候我们已经备份了一次，此时进入微信的备份设置那里进入<code>管理备份文件</code>栏目之后，按道理是能看到一个备份的，但是实际上却毛都没有，这又是闹哪样呢</p>
</li>
<li><p>因为mac下的应用是以沙盒模式运行，无法直接读取不在该应用程序目录以外的目录，所以虽然创建软连接把备份目录指向外置硬盘了，但实际上还是读取不到的。要解决这个问题需要先退出微信，然后重新签名微信，再执行如下代码即可给微信重新签名。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo codesign --sign - --force --deep /Applications/WeChat.app</span><br></pre></td></tr></table></figure>

<ul>
<li><p>重签之后再打开微信，再次进入<code>管理备份文件</code> 栏目,会弹出一个是否允许访问外挂硬盘的提示，点击同意之后就能看到我们之前的备份了</p>
<div align=center><img src="https://pic.oldzhg.com/uPic/image-1663226325395.webp" alt="image-1663226325395" style="zoom:50%;" /></div>



</li>
</ul>
<h2 id="话外"><a href="#话外" class="headerlink" title="话外"></a>话外</h2><ul>
<li>软链接的方式更方便，只要硬盘插着的，你执行备份、恢复的操作都会直接走移动硬盘，相当于直接正常操作就会把文件备份到移动硬盘里面。既不占用电脑存储空间，又不需要额外操作。</li>
<li>很早之前我就用过创建软连接的方式来备份微信聊天记录到外置存储，那时候直接创建软连接就完事了，创建完就能正常读取恢复， 但是后面不知道什么时候开始就出问题了，软连接还在，但是备份恢复都不好使了，完全读取不到了。尝试过很多办法都没解决，最终搜到了 <a href="https://blog.zcw159357.com/article/1/2021-07-20-0033.html" target="_blank" rel="noopener">这篇博客</a> 才终于发现了解决方案，非常感谢这个博主。</li>
<li>经过博主测试，备份、恢复、插拔硬盘之后再操作、重启微信之后再操作均正常，但是还没试过更新微信之后是什么效果，不过目测更新微信版本之后应该会失效，不过解决方法也很简单，重新执行签名命令签名一次就行。</li>
</ul>
<h3 id="转自：https-luoxx-top-archives-mac-wechat-backup-path"><a href="#转自：https-luoxx-top-archives-mac-wechat-backup-path" class="headerlink" title="转自：https://luoxx.top/archives/mac-wechat-backup-path"></a>转自：<a href="https://luoxx.top/archives/mac-wechat-backup-path" target="_blank" rel="noopener">https://luoxx.top/archives/mac-wechat-backup-path</a></h3>
        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Mac/"># Mac</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">上一页</a>
                <span>| </span>
                <a href="/">主页</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2020/08/11/JavaWeb-Environment/">搭建Java Web开发环境</a>
            
        </section>

        <br/>
        
            <section id="comments" class="comments">
                <!-- <style>
                    .comments{margin:30px;padding:10px;background:#fff}
                    @media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#fff}}
                </style> -->
              <div class="valine_comment"></div>
<!--载入js，在</body>之前插入即可-->
<!--Leancloud 操作库:-->
<script src="//unpkg.com/leancloud-storage@4.12.1/dist/av-min.js"></script>
<!--Valine 的核心代码库-->
<script src="//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
<script>
  new Valine({
      el: '.valine_comment',
      app_id: 'c4UzW78lv7A03NiPJSxK9ChO-gzGzoHsz',
      app_key: 'DB4G8lqc5j7magaSEc7uGQby',
      placeholder: '',
    });
</script>
            </section>
          

    </article>
</div>

        </div>
        <footer id="footer" class="footer">

    <!-- <div class="copyright">
        <span>© Old zhg | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div> -->

    <div class="copyright">
        <span>
            <div>© 2017-2023 <a href="/">Oldzhg</a></div>
            Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a> · 
            <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow">豫ICP备2023012905号</a>
            <i class="iconfont icon-dian "></i>
            <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank" rel="nofollow" title="由又拍云提供CDN支持"><img alt="由又拍云提供CDN支持" src=/image/upyun_logos/又拍云_logo5.png style="vertical-align: middle;height: 15px;"></a>
        </span>
    </div>

<!--     <div class="statistics">
        <span>
            站点浏览统计
            引入不蒜子
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            开始添加本站访客数
            <span id="busuanzi_container_site_pv">
                本站总访问量: <span id="busuanzi_value_site_pv"></span>
            </span>
            <span id="busuanzi_container_site_uv">
                | 本站总访客: <span id="busuanzi_value_site_uv"></span>
            </span>s
            添加完成
            # pv方式，单个用户连续点击 n 篇，记录 n 次记录值
            # uv方式，单个用户连续点击 n 篇，记录 1 次记录值

            <span class="post-count">
                | 字数统计:
            <a href="">24.3k</a>  
            </span>
        </span>
    </div> -->

</footer>

<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
    </script>
    
    </div>
</body>
</html>
