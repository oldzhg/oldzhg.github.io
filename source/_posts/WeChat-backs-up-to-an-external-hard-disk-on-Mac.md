---
title: Mac 微信备份到外接硬盘方案
date: 2022-10-08 16:22:45
tags: Mac
categories: 工具技巧
---

---

> mac版本微信中并没有指定备份路径的功能，备份的聊天记录文件也在一个很难找的位置。对于使用256g硬盘的mac的用户，微信聊天记录动辄十几G、几十G的大小，会造成非常严重的硬盘容量恐慌。所以把微信备份文件迁移到外置硬盘是一件非常有意义的工作。

## 微信的备份路径

微信的备份在

`~/Library/Containers/com.tencent.xinWeChat/Data/Library/Application\ Support/com.tencent.xinWeChat/2.0b4.0.9` 这个目录下面的 `Backup` 文件夹里面。

![image-1663224431683](https://pic.oldzhg.com/uPic/image-1663224431683.webp)

每一个微信账号的聊天记录备份对应这个目录下的一个文件夹（名称为一长串的字母及数字)

## 比较简单的迁移方式

知道了文件备份在那个目录，其实我们只需要每次备份完成之后，把这个里面的文件夹剪切粘贴到移动硬盘的指定位置即可。
需要恢复备份的时候再从移动硬盘里面把文件拷贝回这个目录即可。

## 更智能的迁移方式

前一种方式操作起来稍微有点麻烦，需要自己来回复制，怎么才能省略掉这两个手动复制粘贴的操作呢，答案就是使用软连接的方式。

- 如果你的mac版微信没有执行过备份操作，那可能没有这个Backup目录，或者Backup目录下面没有子目录，为了保证文件权限一致，需要先执行一次备份生成这个目录（无需全量备份，只备份一个人的聊天记录都行）
- 备份完成之后，将该 `Backup` 目录复制到移动硬盘下的某个目录，比如 `/Volumes/硬盘名/backup/wechat`
- 复制完成之后就可以把微信默认备份路径下的 `Backup` 目录删除了，当然你不放心的话，也可以删除前先备份一下。
- 然后创建软连接，打开终端，执行如下命令。（注意。此处的 `硬盘名` 要改成你自己的外置硬盘的盘符名称）

```bash
ln -s /Volumes/硬盘名/backup/wechat/Backup ~/Library/Containers/com.tencent.xinWeChat/Data/Library/Application\ Support/com.tencent.xinWeChat/2.0b4.0.9/Backup
```

- 此时就能看到软连接已经创建好了，微信目录下的Backup已经指向到了移动硬盘下的Backup目录

  ![image-1663225770604](https://pic.oldzhg.com/uPic/image-1663225770604.webp)

- 第一步的时候我们已经备份了一次，此时进入微信的备份设置那里进入`管理备份文件`栏目之后，按道理是能看到一个备份的，但是实际上却毛都没有，这又是闹哪样呢

- 因为mac下的应用是以沙盒模式运行，无法直接读取不在该应用程序目录以外的目录，所以虽然创建软连接把备份目录指向外置硬盘了，但实际上还是读取不到的。要解决这个问题需要先退出微信，然后重新签名微信，再执行如下代码即可给微信重新签名。

```bash
sudo codesign --sign - --force --deep /Applications/WeChat.app
```

- 重签之后再打开微信，再次进入`管理备份文件` 栏目,会弹出一个是否允许访问外挂硬盘的提示，点击同意之后就能看到我们之前的备份了

  <div align=center><img src="https://pic.oldzhg.com/uPic/image-1663226325395.webp" alt="image-1663226325395" style="zoom:50%;" /></div>



## 话外

- 软链接的方式更方便，只要硬盘插着的，你执行备份、恢复的操作都会直接走移动硬盘，相当于直接正常操作就会把文件备份到移动硬盘里面。既不占用电脑存储空间，又不需要额外操作。
- 很早之前我就用过创建软连接的方式来备份微信聊天记录到外置存储，那时候直接创建软连接就完事了，创建完就能正常读取恢复， 但是后面不知道什么时候开始就出问题了，软连接还在，但是备份恢复都不好使了，完全读取不到了。尝试过很多办法都没解决，最终搜到了 [这篇博客](https://blog.zcw159357.com/article/1/2021-07-20-0033.html) 才终于发现了解决方案，非常感谢这个博主。
- 经过博主测试，备份、恢复、插拔硬盘之后再操作、重启微信之后再操作均正常，但是还没试过更新微信之后是什么效果，不过目测更新微信版本之后应该会失效，不过解决方法也很简单，重新执行签名命令签名一次就行。

### 转自：https://luoxx.top/archives/mac-wechat-backup-path
